{"mappings":"gfAAAA,EAAA,S,WAAA,IACMC,EAAM,2CAEc,4DAAgEC,OAAJD,G","sources":["src/js/api/fetchApi.js"],"sourcesContent":["import axios from \"axios\";\nconst KEY = 'api-key=3HHtrx1v9QZUfdmskYGXIqIWRgxdBdcv';\nconst BASE_URL = 'https://api.nytimes.com/svc';\nconst MOST_POPULAR_NEWS = `https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?${KEY}`;\n\n// Пошук популярних новин\nasync function getPopularArticle() {\n    const articleFetch = await fetch(MOST_POPULAR_NEWS);\n    const articles = await articleFetch.json();\n    let { results } = articles;\n    // console.log(results);\n    return results;\n}\n\n// Пошук категорій\nasync function getCategoryList() {\n    const categoryList = await fetch(\n        `${BASE_URL}/news/v3/content/section-list.json?${KEY}`\n    );\n    const categories = await categoryList.json();\n    let { results } = categories;\n\n    // console.log(results);\n\n    return results;\n}\n\n\n// Пошук за запитом по Search\nlet sumPage;\nasync function getSearchArticle(value, page) {\n    let dateForUrl = '';\n    try {\n        let date = JSON.parse(localStorage.getItem('date'))\n            .replace('/', '')\n            .replace('/', '');\n        // console.log(date);\n        dateForUrl = `&begin_date=${date}&end_date=${date}`;\n    } catch (error) {\n        // dateForUrl = '';\n    }\n    const articleFetch = await fetch(\n        `${BASE_URL}/search/v2/articlesearch.json?q=${value}&${KEY}&page=${page}${dateForUrl}`\n    );\n    const articles = await articleFetch.json();\n\n    let { response, errors } = articles;\n\n    if (errors) {\n        alert(JSON.parse(errors));\n        return;\n    }\n\n    if (response.meta.hits > 1000) {\n        sumPage = 1000;\n    } else {\n        sumPage = response.meta.hits;\n    }\n    // console.log(response.meta.hits);\n    let { docs } = response;\n    // console.log(docs);\n\n    return docs;\n}\n\nasync function getArticleByCategory(value) {\n    try {\n        let newValue = encodeURIComponent(value);\n\n        const articleFetch = await fetch(\n            `${BASE_URL}/news/v3/content/all/${newValue}.json?${KEY}&limit=30`\n        );\n\n        const articles = await articleFetch.json();\n\n        let { results } = articles;\n\n        console.log(results);\n        return results;\n    } catch (error) {\n        console.log('Ooops we have a problem');\n    }\n}\n\n\n\nexport {\n    getCategoryList,\n    getPopularArticle,\n    getArticleByCategory,\n    getSearchArticle,\n    sumPage,\n};\n\n// !!!Виклики функцій працюють\n// getPopularArticle();\n// getCategoryList();\n// для getArticleByCategory вввести значення з масиву getCategoryList() \"name\";\n// getArticleByCategory(\"books\");\n// getSearchArticle(\"chatgpt\", 1);\n"],"names":["parcelRequire","$20fba14b5e95ec63$var$KEY","concat"],"version":3,"file":"index.5e0195fb.js.map"}