function e(e){let t=[];return e in localStorage&&null!==localStorage[e]&&(t=JSON.parse(localStorage[e])),t}function t(e,t){localStorage[e]=JSON.stringify(t)}function n(n,a){const r=e(n);r.push(a),t(n,r)}function a(n,a){t(n,e(n).filter((e=>!a(e))))}function r(t,n){return e(t).some(n)}function s(e){return e.toLocaleDateString("en-GB")}function d(e){"response"in e&&"docs"in e.response&&(e=e.response.docs);const t=(e=e||[]).map((e=>{const{headline:t,web_url:d,pub_date:i,lead_paragraph:c,news_desk:l,bigMobileImg:o,smallMobileImg:u,smallSquareImg:_,bigSquareImg:m}=e,p=c.length>80?c.slice(0,80)+"...":c,g=r("favorite-key",(e=>e.web_url==d)),f=r("read-key",(e=>e.web_url==d)),b=s(new Date(i)),h=m?`https://www.nytimes.com/${m}`:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT9eXq6h_EHL7Iu-tVrAWQPJ4ozAiL3y5NY2m5jmcw&s",y=document.createElement("li");y.classList.add("card__item"),y.innerHTML=`<div class="card__wrapper">\n      <div class="card-image__wrapper">\n        <img\n          class="card__image"\n          src=${h}\n          alt="news"\n          width="288"\n          height="395"\n          loading='lazy'\n        />\n        <span class="card-jobsearching"> ${l} </span>\n        <span class="card-already__read ${f?"":"is-hidden"}">Already read</span>\n        <button class="card__btn btn-add ${g?"is-hidden":""}" type="button" \n        data-url="${d}">Add to favorite</button>\n        <button class="card__btn btn-remove ${g?"":"is-hidden"}" type="button" data-url="${d}">Remove from favorite</button>\n      </div>\n\t\t<h2 class="card__title">${t}</h2>\n      <p class="card__article">${p}</p>\n      <div class="card__info">\n        <span class="card__info--date">${b}</span>\n        <a class="card__info--readmore" href="${d}" target="_blank">\n          Read more\n        </a>\n      </div>\n    </div>`;const v=y.querySelector("button.card__btn.btn-add"),w=y.querySelector("button.card__btn.btn-remove"),S=y.querySelector(".card-already__read"),L=y.querySelector("a.card__info--readmore");return v.addEventListener("click",(()=>{n("favorite-key",e),v.classList.add("is-hidden"),w.classList.remove("is-hidden")})),w.addEventListener("click",(()=>{a("favorite-key",(({web_url:e})=>d===e)),w.classList.add("is-hidden"),v.classList.remove("is-hidden")})),L.addEventListener("click",(()=>{a("read-key",(({web_url:e})=>d===e)),e.readDate=s(new Date),n("read-key",e),S.classList.remove("is-hidden")})),y})),d=document.createElement("li");d.classList.add("card__item"),d.innerHTML='<div class="card__item--weather"></div>';let i=window.innerWidth;i>=768&&i<1280?t.splice(1,0,d):i>=1280?t.splice(2,0,d):t.splice(0,0,d);const c=document.createDocumentFragment();return t.forEach((e=>c.appendChild(e))),c}const i=document.querySelector(".favorite-container"),c=document.querySelector(".favorite-not-found"),l=localStorage.getItem("favorite-key");let o=JSON.parse(l);i.replaceChildren(d(o)),i.addEventListener("click",(function(e){console.log(e.target.dataset.url);let t=e.target.dataset.url;o.map((e=>{if(e.web_url===t){const t=o.indexOf(e);o.splice(t,1),localStorage.setItem("favorite-key",JSON.stringify(o)),i.replaceChildren(d(o))}}))})),console.log(o===[]),0===o.length&&(console.log(1111),i.style.display="none",c.style.display="flex",c.querySelector(".underfined").classList.remove("underfined-hidden"));
//# sourceMappingURL=favorite.fe8cfa4b.js.map
