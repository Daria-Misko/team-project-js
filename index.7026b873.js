async function t(){const t=await fetch("https://api.nytimes.com/svc/news/v3/content/section-list.json?api-key=3HHtrx1v9QZUfdmskYGXIqIWRgxdBdcv"),e=await t.json();let{results:n}=e;return n}const e=document.querySelector(".buttons-list"),n=document.querySelector("#btn-open-category"),s=document.querySelector(".category__menu");function i(t){if(s.classList.contains("is-open-categories"))if(s.classList.remove("is-open-categories"),t.length<18)n.firstChild.textContent=t;else{const e=`${t.slice(0,15)}...`;n.firstChild.textContent=e}else window.matchMedia("(max-width: 767px)").matches&&(n.firstChild.textContent="Categories"),window.matchMedia("(min-width: 768px)").matches&&(n.firstChild.textContent="Others")}function o(t){return t.map((({section:t,display_name:e})=>`<li class='category__item'>\n        <button class="btn-item"\n            data-btn=${r(t)}>${e}</button>\n            </li>`)).join(" ")}function c(t){return t.map((({section:t,display_name:e})=>`<li class='buttons-list__item'>\n        <button class='buttons-list__button' data-btn=${r(t)}>\n        ${e}</button>\n        </li>`)).join(" ")}function a(t,e){const n=[];return n.push(t.slice(0,e)),n.push(t.slice(e)),n}function r(t){return encodeURIComponent(t)}const d=document.querySelector(".buttons-list"),l=document.querySelector("#btn-open-category"),u=document.querySelector(".category__menu"),m=document.querySelector(".arrow-icon");!async function(n){try{const s=await t();if(window.matchMedia("(max-width: 767px)").matches&&(e.innerHTML="",n.innerHTML=o(s)),window.matchMedia("(min-width: 768px) and (max-width: 1279px)").matches){e.innerHTML="";const t=a(s,4);n.innerHTML=o(t[1]),e.insertAdjacentHTML("beforeend",c(t[0]))}if(window.matchMedia("(min-width: 1280px)").matches){e.innerHTML="";const t=a(s,6);n.innerHTML=o(t[1]),e.insertAdjacentHTML("beforeend",c(t[0]))}}catch{console.log(error)}}(u),i(),d.addEventListener("click",(function(t){const e=t.target.dataset.btn;console.log(e)})),l.addEventListener("click",(function(){const t="true"===l.getAttribute("aria-expanded")||!1;l.setAttribute("aria-expanded",!t),u.classList.toggle("is-open-categories"),u.classList.contains("is-open-categories")&&m.classList.add("open-categories");u.classList.contains("is-open-categories")||(m.classList.remove("open-categories"),l.blur())})),u.addEventListener("click",(function(t){const e=t.target.dataset.btn,n=t.target.innerText;console.log(e),i(decodeURIComponent(n)),u.classList.remove("is-open-categories"),m.classList.add("open-categories"),l.focus()})),window.onclick=t=>{t.target.matches(".category__btn")||t.target.matches(".btn-item")||u.classList.contains("is-open-categories")&&u.classList.remove("is-open-categories"),t.target.matches(".category__btn")||m.classList.contains("open-categories")&&m.classList.remove("open-categories")};
//# sourceMappingURL=index.7026b873.js.map
