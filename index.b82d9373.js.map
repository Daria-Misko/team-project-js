{"mappings":"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","sources":["src/js/getPopularNews.js"],"sourcesContent":["import cardMarkup from \"./cardMarkup\";\nimport {initWeather} from './weather';\nimport getNewsBySearch from \"./getNewsBySearch\";\nimport {headerRefs} from \"./headerRefs\";\nimport smoothScroll from \"./smoothScroll\";\n\n\nconst apiKey = '3HHtrx1v9QZUfdmskYGXIqIWRgxdBdcv';\nconst URL = `https://api.nytimes.com/svc/mostpopular/v2/emailed/7.json?api-key=${apiKey}`\n\nfunction upadatePerPage() {\n\tconst mediaQueryDesktop = window.matchMedia('(min-width: 1280px)');\n\tconst mediaQueryTablet = window.matchMedia('(min-width: 768px)');\n\tconst mediaQueryMobile = window.matchMedia('(max-width: 767px)');\n\t\n\tif (mediaQueryDesktop.matches) {\n\t\tpopularArticles.perPage = 8;\n\t  return;\n\t} \n\tif (mediaQueryTablet.matches) {\n\t\tpopularArticles.perPage = 7;\n\t  return;\n\t} \n\tif (mediaQueryMobile.matches) {\n\t\tpopularArticles.perPage  = 4;\n\t  return;\n\t} \n\n}\n\n\n\nconst popularArticles = {\n\tbody:[],\n\tfirstNews: 0,\n\tlastNews: 0,\n\tperPage: 0,\n\tpage: 1,\n\t\n\tgetPages() {\n\t\treturn Math.ceil(this.body.length / this.perPage);\n\t},\n\tinitOrderNews() {\n\t\tthis.lastNews = this.perPage;\n\t\tthis.firstNews = 0;\n\t},\n\tcutToLimitOrder() {\n\t\tthis.page = this.getPages();\n\t\tthis.lastNews = this.body.length;\n\t\tthis.firstNews = this.body.length - this.perPage;\n\t},\n\tresetLimitOrder() {\n\t\tthis.page = 1;\n\t\tthis.lastNews = this.perPage;\n\t\tthis.firstNews = 0;\n\n\t},\n\tincreasePage() {\n\t\tthis.page += 1;\n\t},\n\tdecreasePage() {\n\t\tthis.page -= 1;\n\t},\n\tincreaseStep(){\n\t\tthis.firstNews += this.perPage;\n\t\tthis.lastNews += this.perPage;\n\t},\n\tdecreaseStep(){\n\t\tthis.firstNews -= this.perPage;\n\t\tthis.lastNews -= this.perPage;\n\t},\n\taddToBody(value) {\n\t\tthis.body = [...value];\n\t},\n\tsliceBody() {\n\t\treturn this.body.slice(this.firstNews,this.lastNews);\n\t}\n};\nupadatePerPage();\npopularArticles.initOrderNews();\n\ngetNewsBySearch(URL)\n\t.then((response) => {\n\t\tconst allPopularArticles = response.results;\n\t\tpopularArticles.addToBody(allPopularArticles);\n\t}).then(() => {\n\t\theaderRefs.list.replaceChildren(cardMarkup(normalizedPopularNews(popularArticles.sliceBody())));\n\t\tinitWeather();\n\t});\n\theaderRefs.nextArrow.addEventListener('click',onNextArrow);\n\theaderRefs.backArrow.addEventListener('click',onBackArrow);\n\n// getMostPopularArticles().then(res => {\n// \tconst ulEl = document.querySelector('.popular-articles__list');\n// \tconsole.log(ulEl);\n// \tulEl.insertAdjacentHTML('beforeend', cardMarkup(res));\n// })\nfunction onNextArrow() {\n\n\tif(popularArticles.firstNews === 0) {\n\t\tpopularArticles.resetLimitOrder();\n\t}\n\tif(popularArticles.page <= popularArticles.getPages()) {\n\t\t\n\t\tpopularArticles.increasePage();\n\t\theaderRefs.backArrow.removeAttribute('disabled');\n\t\theaderRefs.list.replaceChildren(cardMarkup(normalizedPopularNews(popularArticles.sliceBody())));\n\t\tinitWeather();\n\t\tpopularArticles.increaseStep();\n\t\t\n\t\t} \n\tif(popularArticles.page > popularArticles.getPages()) {\n\t\tpopularArticles.cutToLimitOrder();\n\t\theaderRefs.nextArrow.setAttribute('disabled',true);\n\t}\n\tsmoothScroll();\n}\n\nfunction onBackArrow() {\n\t\n\tif(popularArticles.page > 0) {\n\t\tpopularArticles.decreasePage();\n\n\t\theaderRefs.nextArrow.removeAttribute('disabled');\n\t\theaderRefs.list.replaceChildren(cardMarkup(normalizedPopularNews(popularArticles.sliceBody())));\n\t\tpopularArticles.decreaseStep();\n\t\tinitWeather();\n\t\t} \n\tif(popularArticles.page === 0) {\n\t\theaderRefs.backArrow.setAttribute('disabled',true);\n\t}\n\tif(popularArticles.firstNews < 0) {\n\t\tpopularArticles.firstNews = 0;\n\t}\n\n\tsmoothScroll();\n}\n\nfunction normalizedPopularNews(articles) {\nconst outputArticles = [];\narticles.map(({ title, url, published_date, abstract, section, id, media }) => { \n\n\t\n\tconst img = media.length > 0 \n\t? media[0]['media-metadata'][2].url\n\t: 'https://as1.ftcdn.net/v2/jpg/00/77/50/78/500_F_77507884_B00iVspJkgxbh6o1JuKza9qYpioCZ9ja.jpg';\n\n\tconst article = {\n\theadline: title,\n\tweb_url: url, \n\t  pub_date: published_date,\n\t  lead_paragraph: abstract,\n\t  news_desk: section, \n\t  bigSquareImg: img,\n\t  id: id\n\t};\n\toutputArticles.push(article);\n} ); \nreturn outputArticles;\n}\n"],"names":["$eVqJU","parcelRequire","$1969fc547029a942$var$popularArticles","body","firstNews","lastNews","perPage","page","getPages","Math","ceil","this","length","initOrderNews","cutToLimitOrder","resetLimitOrder","increasePage","decreasePage","increaseStep","decreaseStep","addToBody","value","sliceBody","slice","$1969fc547029a942$var$normalizedPopularNews","articles","outputArticles","map","title","url","published_date","abstract","section","id","media","article","headline","web_url","pub_date","lead_paragraph","news_desk","bigSquareImg","push","mediaQueryDesktop","window","matchMedia","mediaQueryTablet","mediaQueryMobile","matches","$1969fc547029a942$var$upadatePerPage","$3lSCO","default","then","response","allPopularArticles","results","$6W1HG","headerRefs","list","replaceChildren","$bkgkh","initWeather","nextArrow","addEventListener","backArrow","removeAttribute","setAttribute","$2cKMc"],"version":3,"file":"index.b82d9373.js.map"}