{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAQMC,EAAM,qEAA4EC,OADzE,oCAyBf,IArBOC,EACAC,EACAC,EAmBDC,EAAkB,CACvBC,KAAK,GACLC,UAAW,EACXC,SAAU,EACVC,QAAS,EACTC,KAAM,EAENC,SAAA,WACC,OAAOC,KAAKC,KAAKC,KAAKR,KAAKS,OAASD,KAAKL,Q,EAE1CO,cAAA,WACCF,KAAKN,SAAWM,KAAKL,QACrBK,KAAKP,UAAY,C,EAElBU,gBAAA,WACCH,KAAKJ,KAAOI,KAAKH,WACjBG,KAAKN,SAAWM,KAAKR,KAAKS,OAC1BD,KAAKP,UAAYO,KAAKR,KAAKS,OAASD,KAAKL,O,EAE1CS,gBAAA,WACCJ,KAAKJ,KAAO,EACZI,KAAKN,SAAWM,KAAKL,QACrBK,KAAKP,UAAY,C,EAGlBY,aAAA,WACCL,KAAKJ,MAAQ,C,EAEdU,aAAA,WACCN,KAAKJ,MAAQ,C,EAEdW,aAAA,WACCP,KAAKP,WAAaO,KAAKL,QACvBK,KAAKN,UAAYM,KAAKL,O,EAEvBa,aAAA,WACCR,KAAKP,WAAaO,KAAKL,QACvBK,KAAKN,UAAYM,KAAKL,O,EAEvBc,UAAA,SAAUC,GACTV,KAAKR,KAAQmB,EAAA3B,EAAA,CAAG0B,E,EAEjBE,UAAA,WACC,OAAOZ,KAAKR,KAAKqB,MAAMb,KAAKP,UAAUO,KAAKN,S,GAkE7C,SAASoB,EAAsBC,GAC/B,IAAMC,EAAiB,GAmBvB,OAlBAD,EAASE,KAAI,SAAAC,G,IAAGC,EAAKD,EAALC,MAAOC,EAAGF,EAAHE,IAAKC,EAAcH,EAAdG,eAAgBC,EAAQJ,EAARI,SAAUC,EAAOL,EAAPK,QAASC,EAAEN,EAAFM,GAAIC,EAAKP,EAALO,MAO5DC,EAAU,CAChBC,SAAUR,EACVS,QAASR,EACPS,SAAUR,EACVS,eAAgBR,EAChBS,UAAWR,EACXS,aAVUP,EAAMxB,OAAS,EACzBwB,EAAM,GAAG,kBAAkB,GAAGL,IAC9B,+FASAI,GAAIA,GAENR,EAAeiB,KAAKP,E,IAEdV,C,CAtJA5B,EAAoB8C,OAAOC,WAAW,uBACtC9C,EAAmB6C,OAAOC,WAAW,sBACrC7C,EAAmB4C,OAAOC,WAAW,sBAEvC/C,EAAkBgD,QACrB7C,EAAgBI,QAAU,EAGvBN,EAAiB+C,QACpB7C,EAAgBI,QAAU,EAGvBL,EAAiB8C,UACpB7C,EAAgBI,QAAW,GAuD7BJ,EAAgBW,iBAEhB,EAAAmC,EAAAC,SAAgBpD,GACdqD,MAAK,SAACC,GACN,IAAMC,EAAqBD,EAASE,QACpCnD,EAAgBkB,UAAUgC,E,IACxBF,MAAK,WACPI,EAAAC,WAAWC,KAAKC,iBAAgB,EAAAC,EAAAT,SAAWxB,EAAsBvB,EAAgBqB,gBACjF,EAAAoC,EAAAC,c,IAEDN,EAAAC,WAAWM,UAAUC,iBAAiB,SAQvC,WAEkC,IAA9B5D,EAAgBE,WAClBF,EAAgBa,kBAEdb,EAAgBK,MAAQL,EAAgBM,YAC1CN,EAAgBgB,eAChBhB,EAAgBc,eAChBsC,EAAAC,WAAWQ,UAAUC,gBAAgB,YAErCV,EAAAC,WAAWC,KAAKC,iBAAgB,EAAAC,EAAAT,SAAWxB,EAAsBvB,EAAgBqB,gBACjF,EAAAoC,EAAAC,gBAEU1D,EAAgBK,KAAOL,EAAgBM,aACjDN,EAAgBY,kBAChBwC,EAAAC,WAAWM,UAAUI,aAAa,YAAW,IAE3C/D,EAAiBC,KAAKS,OAASV,EAAgBG,SAAWH,EAAgBI,QAAYJ,EAAgBI,SACxGgD,EAAAC,WAAWM,UAAUI,aAAa,YAAW,IAG9C,EAAAC,EAAAjB,U,IA5BAK,EAAAC,WAAWQ,UAAUD,iBAAiB,SA+BvC,WAEI5D,EAAgBK,KAAO,IACzBL,EAAgBe,eAChBf,EAAgBiB,eAChBmC,EAAAC,WAAWM,UAAUG,gBAAgB,YACrCV,EAAAC,WAAWC,KAAKC,iBAAgB,EAAAC,EAAAT,SAAWxB,EAAsBvB,EAAgBqB,gBAEjF,EAAAoC,EAAAC,gBAE2B,IAAzB1D,EAAgBK,MAA4C,IAA9BL,EAAgBE,WAChDkD,EAAAC,WAAWQ,UAAUE,aAAa,YAAW,GAE3C/D,EAAgBE,UAAY,IAC9BF,EAAgBE,UAAY,IAG7B,EAAA8D,EAAAjB,U","sources":["src/js/getPopularNews.js"],"sourcesContent":["import cardMarkup from \"./cardMarkup\";\nimport {initWeather} from './weather';\nimport getNewsBySearch from \"./getNewsBySearch\";\nimport {headerRefs} from \"./headerRefs\";\nimport smoothScroll from \"./smoothScroll\";\n\n\nconst apiKey = '3HHtrx1v9QZUfdmskYGXIqIWRgxdBdcv';\nconst URL = `https://api.nytimes.com/svc/mostpopular/v2/emailed/7.json?api-key=${apiKey}`\n\nfunction upadatePerPage() {\n\tconst mediaQueryDesktop = window.matchMedia('(min-width: 1280px)');\n\tconst mediaQueryTablet = window.matchMedia('(min-width: 768px)');\n\tconst mediaQueryMobile = window.matchMedia('(max-width: 767px)');\n\t\n\tif (mediaQueryDesktop.matches) {\n\t\tpopularArticles.perPage = 8;\n\t  return;\n\t} \n\tif (mediaQueryTablet.matches) {\n\t\tpopularArticles.perPage = 7;\n\t  return;\n\t} \n\tif (mediaQueryMobile.matches) {\n\t\tpopularArticles.perPage  = 4;\n\t  return;\n\t} \n\n}\n\n\n\nconst popularArticles = {\n\tbody:[],\n\tfirstNews: 0,\n\tlastNews: 0,\n\tperPage: 0,\n\tpage: 1,\n\t\n\tgetPages() {\n\t\treturn Math.ceil(this.body.length / this.perPage);\n\t},\n\tinitOrderNews() {\n\t\tthis.lastNews = this.perPage;\n\t\tthis.firstNews = 0;\n\t},\n\tcutToLimitOrder() {\n\t\tthis.page = this.getPages();\n\t\tthis.lastNews = this.body.length;\n\t\tthis.firstNews = this.body.length - this.perPage;\n\t},\n\tresetLimitOrder() {\n\t\tthis.page = 1;\n\t\tthis.lastNews = this.perPage;\n\t\tthis.firstNews = 0;\n\n\t},\n\tincreasePage() {\n\t\tthis.page += 1;\n\t},\n\tdecreasePage() {\n\t\tthis.page -= 1;\n\t},\n\tincreaseStep(){\n\t\tthis.firstNews += this.perPage;\n\t\tthis.lastNews += this.perPage;\n\t},\n\tdecreaseStep(){\n\t\tthis.firstNews -= this.perPage;\n\t\tthis.lastNews -= this.perPage;\n\t},\n\taddToBody(value) {\n\t\tthis.body = [...value];\n\t},\n\tsliceBody() {\n\t\treturn this.body.slice(this.firstNews,this.lastNews);\n\t}\n};\nupadatePerPage();\npopularArticles.initOrderNews();\n\ngetNewsBySearch(URL)\n\t.then((response) => {\n\t\tconst allPopularArticles = response.results;\n\t\tpopularArticles.addToBody(allPopularArticles);\n\t}).then(() => {\n\t\theaderRefs.list.replaceChildren(cardMarkup(normalizedPopularNews(popularArticles.sliceBody())));\n\t\tinitWeather();\n\t});\n\theaderRefs.nextArrow.addEventListener('click',onNextArrow);\n\theaderRefs.backArrow.addEventListener('click',onBackArrow);\n\n// getMostPopularArticles().then(res => {\n// \tconst ulEl = document.querySelector('.popular-articles__list');\n// \tconsole.log(ulEl);\n// \tulEl.insertAdjacentHTML('beforeend', cardMarkup(res));\n// })\nfunction onNextArrow() {\n\n\tif(popularArticles.firstNews === 0) {\n\t\tpopularArticles.resetLimitOrder();\n\t}\n\tif(popularArticles.page <= popularArticles.getPages()) {\n\t\tpopularArticles.increaseStep();\n\t\tpopularArticles.increasePage();\n\t\theaderRefs.backArrow.removeAttribute('disabled');\n\n\t\theaderRefs.list.replaceChildren(cardMarkup(normalizedPopularNews(popularArticles.sliceBody())));\n\t\tinitWeather();\n\t\n\t\t} else if(popularArticles.page > popularArticles.getPages()) {\n\t\tpopularArticles.cutToLimitOrder();\n\t\theaderRefs.nextArrow.setAttribute('disabled',true);\n\t}\n\tif((popularArticles.body.length - popularArticles.lastNews + popularArticles.perPage ) < popularArticles.perPage ) {\n\t\theaderRefs.nextArrow.setAttribute('disabled',true);\n\t}\n\n\tsmoothScroll();\n}\n\nfunction onBackArrow() {\n\t\n\tif(popularArticles.page > 0) {\n\t\tpopularArticles.decreasePage();\n\t\tpopularArticles.decreaseStep();\n\t\theaderRefs.nextArrow.removeAttribute('disabled');\n\t\theaderRefs.list.replaceChildren(cardMarkup(normalizedPopularNews(popularArticles.sliceBody())));\n\t\t\n\t\tinitWeather();\n\t\t} \n\tif(popularArticles.page === 0 || popularArticles.firstNews === 0 ) {\n\t\theaderRefs.backArrow.setAttribute('disabled',true);\n\t}\n\tif(popularArticles.firstNews < 0) {\n\t\tpopularArticles.firstNews = 0;\n\t}\n\n\tsmoothScroll();\n}\n\nfunction normalizedPopularNews(articles) {\nconst outputArticles = [];\narticles.map(({ title, url, published_date, abstract, section, id, media }) => { \n\n\t\n\tconst img = media.length > 0 \n\t? media[0]['media-metadata'][2].url\n\t: 'https://as1.ftcdn.net/v2/jpg/00/77/50/78/500_F_77507884_B00iVspJkgxbh6o1JuKza9qYpioCZ9ja.jpg';\n\n\tconst article = {\n\theadline: title,\n\tweb_url: url, \n\t  pub_date: published_date,\n\t  lead_paragraph: abstract,\n\t  news_desk: section, \n\t  bigSquareImg: img,\n\t  id: id\n\t};\n\toutputArticles.push(article);\n} ); \nreturn outputArticles;\n}\n"],"names":["$8nrFW","parcelRequire","$9b12918259623da8$var$URL","concat","mediaQueryDesktop","mediaQueryTablet","mediaQueryMobile","$9b12918259623da8$var$popularArticles","body","firstNews","lastNews","perPage","page","getPages","Math","ceil","this","length","initOrderNews","cutToLimitOrder","resetLimitOrder","increasePage","decreasePage","increaseStep","decreaseStep","addToBody","value","$parcel$interopDefault","sliceBody","slice","$9b12918259623da8$var$normalizedPopularNews","articles","outputArticles","map","param","title","url","published_date","abstract","section","id","media","article","headline","web_url","pub_date","lead_paragraph","news_desk","bigSquareImg","push","window","matchMedia","matches","$gpT04","default","then","response","allPopularArticles","results","$crlC9","headerRefs","list","replaceChildren","$7iFtI","$fMavV","initWeather","nextArrow","addEventListener","backArrow","removeAttribute","setAttribute","$l16qp"],"version":3,"file":"index.872aa4cf.js.map"}